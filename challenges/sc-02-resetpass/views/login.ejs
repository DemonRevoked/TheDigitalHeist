<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Mint Access Badge Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div class="backdrop-container" id="backdrop">
    <canvas id="globe-canvas"></canvas>
  </div>
  
  <div class="content-layer">
    <div class="container">
      <div class="scanline"></div>
      
      <div class="text-center mb-8">
        <div class="system-label">AUTHENTICATION REQUIRED</div>
      </div>
      
      <h2 class="glow-text text-center">Login</h2>
      
      <% if (error) { %><p class="error"><%= error %></p><% } %>

      <form method="post" action="/login">
        <label>Email</label>
        <input name="email" placeholder="tokyo@mint.local" required />
        <label>Password</label>
        <input name="password" type="password" placeholder="tokyo123" required />
        <button class="btn" type="submit">Enter</button>
      </form>

      <div style="margin-top: 24px; text-align: center;">
        <a href="/">‚Üê Back to Portal</a>
      </div>
    </div>
  </div>
  
  <script>
    const canvas = document.getElementById('globe-canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    let rotation = 0;
    function drawGlobe() {
      // Recalculate dimensions on each frame to handle resizing
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = Math.min(canvas.width, canvas.height) * 0.35;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = '#1a4d2e';
      ctx.lineWidth = 1;
      for (let i = 0; i < 24; i++) {
        const angle = (i / 24) * Math.PI * 2 + rotation;
        ctx.beginPath();
        for (let j = 0; j <= 50; j++) {
          const lat = (j / 50) * Math.PI - Math.PI / 2;
          const x = centerX + radius * Math.cos(lat) * Math.sin(angle);
          const y = centerY + radius * Math.sin(lat);
          const z = radius * Math.cos(lat) * Math.cos(angle);
          ctx.globalAlpha = z > 0 ? 0.8 : 0.15;
          if (j === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        }
        ctx.stroke();
      }
      rotation += 0.003;
      requestAnimationFrame(drawGlobe);
    }
    drawGlobe();
  </script>
</body>
</html>
